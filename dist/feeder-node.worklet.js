(()=>{var t={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},858:t=>{t.exports=function(t){if(Array.isArray(t))return t}},506:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},100:(t,e,r)=>{var n=r(489),o=r(67);function a(e,r,s){return o()?t.exports=a=Reflect.construct:t.exports=a=function(t,e,r){var o=[null];o.push.apply(o,e);var a=new(Function.bind.apply(t,o));return r&&n(a,r.prototype),a},a.apply(null,arguments)}t.exports=a},913:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},754:t=>{function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e},205:(t,e,r)=>{var n=r(489);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},430:t=>{t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},67:t=>{t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},884:t=>{t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},585:(t,e,r)=>{var n=r(8),o=r(506);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},489:t=>{function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e},38:(t,e,r)=>{var n=r(858),o=r(884),a=r(379),s=r(521);t.exports=function(t,e){return n(t)||o(t,e)||a(t,e)||s()}},8:t=>{function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e},379:(t,e,r)=>{var n=r(228);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},957:(t,e,r)=>{var n=r(754),o=r(489),a=r(430),s=r(100);function i(e){var r="function"==typeof Map?new Map:void 0;return t.exports=i=function(t){if(null===t||!a(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return s(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},i(e)}t.exports=i}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(38),e=r.n(t),n=r(575),o=r.n(n),a=r(913),s=r.n(a),i=r(506),u=r.n(i),f=r(205),h=r.n(f),l=r(585),c=r.n(l),p=r(754),d=r.n(p),y=r(957),b=r.n(y);const v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32768,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(o()(this,t),this._data=[],this._writePos=0,this._readPos=0,e<=0)throw"bufferLength must be >= 1";if(!(0<r&&r<=2))throw"nChannels must be 0 < nChannels <=2";for(var n=0;n<r;n++)this._data.push(new Float32Array(e));this.bufferLength=e,this._nChannels=r}return s()(t,[{key:"hasDataAvailable",value:function(){return this._writePos!=this._readPos}},{key:"resetReadPosition",value:function(){this._readPos=this._writePos}},{key:"getNReadableSamples",value:function(){return this._readPos==this._writePos?0:this._readPos<this._writePos?this._writePos-this._readPos:this.bufferLength-this._readPos+this._writePos}},{key:"advanceReadPosition",value:function(t){for(var e=this._readPos,r=0;r<t&&(e==this.bufferLength&&(e=0),++e!=this._writePos);r++);this._readPos=e}},{key:"read",value:function(t){for(var e,r=Array.apply(null,Array(this._nChannels)).map((function(e,r){return new Float32Array(t)})),n=Math.min(t,this.getNReadableSamples()),o=0;o<r.length;o++){var a=r[o];e=this._readPos;for(var s=0;s<n;s++)e==this.bufferLength&&(e=0),a[s]=this._data[o][e++]}return this._readPos=e,r}},{key:"readInto",value:function(t,e){for(var r,n=Math.min(e,this.getNReadableSamples()),o=0;o<t.length;o++){r=this._readPos;for(var a=0;a<n;a++)r==this.bufferLength&&(r=0),t[o][a]=this._data[o][r++]}this._readPos=r}},{key:"_resize",value:function(t){for(var e=[],r=this.getNReadableSamples(),n=0;n<this._nChannels;n++)e.push(new Float32Array(t));this.readInto(e,r),this._writePos=r,this._readPos=0,this._data=e,this.bufferLength=e[0].length}},{key:"write",value:function(t){var e,r,n=!1,o=!1;if(ArrayBuffer.isView(t)&&1===this._nChannels)e=[t];else if(ArrayBuffer.isView(t))e=[t],n=!0;else{if(t.length!=this._nChannels)throw"readChannels.length must equal this._nChannels!";for(var a=t[0].length,s=0;s<t.length;s++)if(t[s].length!=a)throw"channel lengths differ in write()";e=t}(n?e[0].length/this._data.length:e[0].length)>this.bufferLength&&(this._resize(e[0].length+this.getNReadableSamples()),o=!0);for(var i=0;i<e.length;i++){var u=e[i];if(r=this._writePos,!0===n)for(var f=0;f<u.length;f+=this._data.length){r==this.bufferLength&&(r=0);for(var h=0;h<this._data.length;h++)this._data[h][r]=u[f+h];r++}else for(var l=0;l<u.length;l++)r==this.bufferLength&&(r=0),this._data[i][r++]=u[l]}return this._writePos=r,[o,this.bufferLength]}}]),t}();var g={UNINITIALIZED:1,READY:2,PLAYING:3,STARVED:4};Object.freeze(g);var _=function(t){h()(i,t);var r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d()(r);if(n){var o=d()(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return c()(this,t)});function i(t){var e;return o()(this,i),(e=a.call(this)).port.onmessage=e._onMessage.bind(u()(e)),e.bufferThreshold,e.state=g.UNINITIALIZED,e}return s()(i,[{key:"process",value:function(t,e,r){return this._updateState(),this.state===g.PLAYING?this._buffer.readInto(e[0],128):function(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++)r[n]=0}(e[0]),!0}},{key:"_updateState",value:function(){var t=this.state;switch(this.state){case g.UNINITIALIZED:return;case g.PLAYING:0===this._buffer.getNReadableSamples()&&(this.state=g.STARVED);break;case g.READY:case g.STARVED:this._buffer.getNReadableSamples()>=this.bufferThreshold&&(this.state=g.PLAYING)}t!=this.state&&this._notifyStateChange()}},{key:"_notifyStateChange",value:function(){this.port.postMessage({command:"stateChange",state:this.state})}},{key:"_onMessage",value:function(t){switch(t.data.command){case"init":this.nChannels=t.data.nChannels,this._init(t.data.bufferLength,t.data.nChannels,t.data.bufferThreshold);break;case"feed":this._feed(t.data.data);break;case"connect":t.ports[0].onmessage=this._onMessage.bind(this);break;default:throw Error("command not specified")}}},{key:"_feed",value:function(t){var r=this._buffer.write(t,this.nChannels>1),n=e()(r,2),o=n[0],a=n[1];o&&this.port.postMessage({command:"bufferLengthChange",bufferLength:a})}},{key:"_init",value:function(t,e,r){this._buffer=new v(t,e),this.bufferThreshold=r,this.state=g.READY,this._notifyStateChange()}}]),i}(b()(AudioWorkletProcessor));registerProcessor("FeederNode",_)})()})();